<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>اغذیه معرفت - طعم نوستالژی ایرانی</title>
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Google Fonts - Vazirmatn for better Persian rendering, Inter as fallback -->
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <!-- Google Fonts - Amiri for a nostalgic Persian look -->
    <link href="https://fonts.googleapis.com/css2?family=Amiri:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', 'Inter', sans-serif; /* Prioritize Vazirmatn for Persian */
            background-color: #fffaf0; /* Very light yellow/cream for a warm, traditional feel */
            color: #333;
            overflow-x: hidden; /* Prevent horizontal scroll due to animations */
        }
        /* Custom traditional Iranian colors (Old Red and Old Yellow theme) */
        /* Old Red: A muted, slightly desaturated red */
        .bg-iran-old-red { background-color: #a04040; }
        .text-iran-old-red { color: #a04040; }
        .border-iran-old-red { border-color: #a04040; }

        /* Old Yellow: A muted, slightly desaturated yellow/ochre */
        .bg-iran-old-yellow { background-color: #d4a040; }
        .text-iran-old-yellow { color: #d4a040; }
        .border-iran-old-yellow { border-color: #d4a040; }

        /* Price text color */
        .text-black-price { color: #000000; } /* Explicitly black for prices */

        .shadow-traditional { box-shadow: 6px 6px 0px rgba(0, 0, 0, 0.15); } /* Softer, traditional shadow */

        /* Custom scroll-snap for smoother navigation */
        html {
            scroll-behavior: smooth;
        }
        section {
            scroll-margin-top: 80px; /* Offset for fixed header */
        }

        /* Background sliding images styles */
        .background-slide-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: -2; /* Ensure it's behind everything */
        }

        .background-slide-item {
            position: absolute;
            width: 150%; /* Increased size to make images more prominent and fill space */
            height: 150%; /* Increased size */
            background-size: cover; /* Keeps images covering the area */
            background-position: center;
            filter: blur(0px); /* No blur for clarity */
            opacity: 0.5; /* Increased opacity for better visibility and vibrancy */
            animation-iteration-count: infinite;
            animation-timing-function: linear;
        }

        /* Define keyframes for sliding animations */
        @keyframes slideLeftToRight {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        @keyframes slideRightToLeft {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        /* Specific animations for each image */
        .slide-hamburger {
            background-image: url('https://images.unsplash.com/photo-1571091718767-18b5b1457add?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideLeftToRight 40s linear infinite;
            left: -100%; /* Start off-screen left */
        }
        .slide-indian {
            background-image: url('https://images.unsplash.com/photo-1589302168068-964722240959?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideRightToLeft 45s linear infinite;
            right: -100%; /* Start off-screen right */
            animation-delay: 5s; /* Stagger start times */
        }
        .slide-omelet {
            background-image: url('https://images.unsplash.com/photo-1596706952778-b125d0c7f2c2?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideLeftToRight 50s linear infinite;
            left: -100%;
            animation-delay: 10s;
        }
        .slide-sausage { /* Used for cocktail/bandari */
            background-image: url('https://images.unsplash.com/photo-1621609764095-fd01e523c14d?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideRightToLeft 55s linear infinite;
            right: -100%;
            animation-delay: 15s;
        }
        .slide-hotdog {
            background-image: url('https://images.unsplash.com/photo-1541781774438-085731b53982?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideLeftToRight 60s linear infinite;
            left: -100%;
            animation-delay: 20s;
        }
        .slide-tea {
            background-image: url('https://images.unsplash.com/photo-1576092762791-fd190539c298?q=80&w=1000&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D');
            animation: slideRightToLeft 65s linear infinite;
            right: -100%;
            animation-delay: 25s;
        }

        /* Overlay for better content readability */
        .background-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 250, 240, 0.4); /* Reduced transparency to show images more */
            z-index: -1; /* Above background images, below content */
        }

        /* Menu item hover effect for attractiveness */
        .menu-item-card {
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
        }
        .menu-item-card:hover {
            transform: translateY(-5px) scale(1.02); /* Lift and slightly enlarge on hover */
            box-shadow: 10px 10px 0px rgba(0, 0, 0, 0.25); /* Stronger shadow on hover */
        }

        /* Fix for header title wrapping */
        .header-title-nowrap {
            white-space: nowrap;
        }

        /* Nostalgic Persian font style */
        .font-nostalgic-persian {
            font-family: 'Amiri', serif; /* Apply Amiri font */
            /* You might need to adjust font-size or line-height for better look with this font */
            /* font-size: 1.1em; */
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease-in-out, visibility 0.3s ease-in-out;
            /* Removed overflow-y: auto for "no scroll" requirement in modal */
            padding: 1rem 0; /* Add some padding for mobile view */
        }

        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background-color: #fffaf0;
            padding: 2rem; /* Slightly reduced padding */
            border-radius: 1rem;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            max-width: 90%;
            width: 450px;
            position: relative;
            transform: translateY(-20px);
            transition: transform 0.3s ease-in-out;
            border: 4px solid #d4a040; /* Old Yellow border */
        }

        .modal-overlay.show .modal-content {
            transform: translateY(0);
        }

        .modal-close-btn {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #a04040; /* Old Red */
            transition: color 0.2s ease-in-out;
        }
        .modal-close-btn:hover {
            color: #7a2a2a; /* Darker red on hover */
        }

        .amount-option {
            background-color: #f0f0f0;
            border: 2px solid #ccc;
            padding: 0.75rem 1.25rem;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            font-weight: 600;
            color: #555;
            font-family: 'Amiri', serif; /* Apply nostalgic font to numbers */
        }
        .amount-option:hover {
            background-color: #e0e0e0;
            border-color: #a04040;
        }
        .amount-option.selected {
            background-color: #d4a040; /* Old Yellow */
            border-color: #a04040; /* Old Red */
            color: #fff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transform: translateY(-2px);
        }
        .amount-option.selected:hover {
            background-color: #c08c30; /* Slightly darker yellow */
        }

        .custom-amount-input, .text-input {
            border: 2px solid #ccc;
            border-radius: 0.5rem;
            padding: 0.75rem 1rem;
            font-size: 1rem;
            width: 100%;
            box-sizing: border-box;
        }
        .custom-amount-input:focus, .text-input:focus {
            outline: none;
            border-color: #a04040; /* Old Red */
            box-shadow: 0 0 0 3px rgba(160, 64, 64, 0.2);
        }

        .order-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem 0;
            border-bottom: 1px dashed #eee;
        }
        .order-item:last-child {
            border-bottom: none;
        }
        .quantity-input {
            width: 60px;
            text-align: center;
            border: 1px solid #ccc;
            border-radius: 0.25rem;
            padding: 0.25rem;
        }

        /* Adjust header height to be more balanced */
        .header-balanced {
            padding-top: 0.75rem; /* py-3 */
            padding-bottom: 0.75rem; /* py-3 */
            min-height: 70px; /* Ensure consistent height */
        }
        .header-balanced h1 {
            font-size: 2.5rem; /* text-4xl to text-3xl */
        }
        .header-balanced p {
            font-size: 1rem; /* text-lg to text-base */
        }
    </style>
</head>
<body class="flex flex-col min-h-screen">

    <!-- Background Sliding Images Container -->
    <div class="background-slide-container">
        <div class="background-slide-item slide-hamburger"></div>
        <div class="background-slide-item slide-indian"></div>
        <div class="background-slide-item slide-omelet"></div>
        <div class="background-slide-item slide-sausage"></div>
        <div class="background-slide-item slide-hotdog"></div>
        <div class="background-slide-item slide-tea"></div>
    </div>

    <!-- Semi-transparent overlay for content readability -->
    <div class="background-overlay"></div>

    <!-- Header Section -->
    <header class="bg-iran-old-red text-white shadow-lg sticky top-0 z-50 header-balanced">
        <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
            <!-- Logo and Slogan with Tea Icon -->
            <div class="flex items-center mb-4 md:mb-0">
                <div class="text-center md:text-right">
                    <h1 class="font-extrabold mb-1 rounded-lg p-2 inline-block bg-iran-old-yellow shadow-md header-title-nowrap" id="header-title">اغذیه معرفت</h1>
                    <p class="mt-2" id="header-slogan" data-standard="طعم نوستالژی و خاطره‌انگیز ایرانی" data-isfahani="طعمی که یادت میمونِد">طعم نوستالژی و خاطره‌انگیز ایرانی</p>
                </div>
                <!-- Tea Icon for Donation - Moved to be next to the logo/slogan -->
                <a href="#" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1 flex items-center mr-4 md:mr-0 md:ml-4" id="open-donation-modal-btn" aria-label="کمک مالی">
                    <svg class="w-6 h-6 text-white" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                        <!-- Saucer -->
                        <path d="M2 17c0 1.104.896 2 2 2h16c1.104 0 2-.896 2-2s-.896-2-2-2H4c-1.104 0-2 .896-2 2z" />
                        <!-- Cup Body (Kamar Barik - more accurate with Bezier curves) -->
                        <path d="M8 5 C6 7, 6 10, 8 12 S 10 15, 8 17 H 16 S 14 15, 16 12 C 18 10, 18 7, 16 5 Z" />
                        <!-- Tea Liquid (half-full, slightly off-white for distinction) -->
                        <rect x="9.5" y="11" width="5" height="2" fill="#F0F0F0" />
                        <!-- Handle -->
                        <path d="M16 8 C18 8, 19 10, 19 12 S 18 16, 16 14" stroke="currentColor" stroke-width="1.5" fill="none"/>
                    </svg>
                </a>
            </div>
            <!-- Navigation -->
            <nav>
                <ul class="flex flex-wrap justify-center md:justify-end gap-4 text-lg font-semibold">
                    <li><a href="#home" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1" data-key="home">صفحه اصلی</a></li>
                    <li><a href="#menu" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1" data-key="menu">منو</a></li>
                    <li><a href="#about" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1" id="nav-about" data-standard="درباره ما" data-isfahani="آ یُخته راجبمون بدون">درباره ما</a></li>
                    <li><a href="#" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1" id="open-order-modal-btn">سفارش آنلاین</a></li>
                    <li><a href="#contact" class="hover:text-iran-old-yellow transition duration-300 rounded-md px-3 py-1" id="nav-contact" data-standard="تماس با ما" data-isfahani="زنگمون بِزِن">تماس با ما</a></li>
                    <li>
                        <button id="dialect-toggle-btn" class="bg-iran-old-yellow text-iran-old-red px-3 py-1 rounded-md hover:bg-iran-old-red hover:text-white transition duration-300 font-bold">حالت اصفهانی</button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow container mx-auto px-4 py-8 relative z-0">
        <!-- Hero Section -->
        <section id="home" class="bg-white rounded-xl shadow-traditional p-8 mb-12 text-center border-4 border-iran-old-yellow">
            <h2 class="text-3xl md:text-4xl font-bold text-iran-old-red mb-4" id="hero-welcome-title">به اغذیه معرفت خوش آمدید!</h2>
            <p class="text-lg md:text-xl leading-relaxed">
                سفری به گذشته، با طعم‌های اصیل و فراموش‌نشدنی.
                ما در "اغذیه معرفت" هنر آشپزی سنتی را با سرعت فست فود ترکیب کرده‌ایم تا تجربه‌ای بی‌نظیر برای شما فراهم آوریم.
            </p>
            <div class="w-full max-w-lg mx-auto rounded-xl overflow-hidden border-4 border-iran-old-red shadow-lg">
                <!-- Image of غذای اصیل ایرانی -->
                <img src="https://placehold.co/800x450/a04040/FFFFFF" alt="تصویری از غذای اصیل ایرانی" class="w-full h-auto object-cover rounded-md">
            </div>
        </section>

        <!-- Menu Section -->
        <section id="menu" class="bg-white rounded-xl shadow-traditional p-8 mb-12 border-4 border-iran-old-red">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-iran-old-yellow mb-8" data-key="menu-title">منوی ما</h2>
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                <!-- Menu Item 1 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2">ساندویچ کالباس سنتی</h3>
                    <p class="text-gray-700 mb-4" id="menu-item-1-desc">کالباس ممتاز، خیارشور، گوجه، کاهو و سس مخصوص معرفت.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 125,000 تومان</span>
                </div>
                <!-- Menu Item 2 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="2xl font-semibold text-iran-old-red mb-2" id="menu-item-2-title">همبرگر دست‌ساز معرفت</h3>
                    <p class="text-gray-700 mb-4">همبرگر گوشت تازه، پنیر، پیاز، خیارشور و سس ویژه خانگی.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 160,000 تومان</span>
                </div>
                <!-- Menu Item 3 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2">سیب‌زمینی سرخ کرده زعفرانی</h3>
                    <p class="text-gray-700 mb-4">سیب‌زمینی تازه و ترد، با نمک و چاشنی زعفرانی.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 75,000 تومان</span>
                </div>
                <!-- Menu Item 4 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2">ساندویچ بندری تند</h3>
                    <p class="text-gray-700 mb-4">سوسیس بندری تند و خوشمزه، با پیاز و سس گوجه سنتی.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 115,000 تومان</span>
                </div>
                <!-- Menu Item 5 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2">دوغ محلی و نوشیدنی‌های سنتی</h3>
                    <p class="text-gray-700 mb-4">دوغ محلی، شربت‌های سنتی و نوشابه‌های شیشه‌ای قدیمی.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 35,000 تومان</span>
                </div>
                <!-- Menu Item 6 -->
                <div class="bg-stone-50 p-6 rounded-lg shadow-md border-2 border-iran-old-yellow menu-item-card">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2">سالاد شیرازی اصیل</h3>
                    <p class="text-gray-700 mb-4">سالاد شیرازی تازه با خیار، گوجه، پیاز و آبغوره.</p>
                    <span class="text-xl font-bold text-black-price">قیمت: 80,000 تومان</span>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="bg-white rounded-xl shadow-traditional p-8 mb-12 text-center border-4 border-iran-old-yellow">
            <h2 class="text-3xl md:text-4xl font-bold text-iran-old-red mb-4" id="about-section-title">درباره اغذیه معرفت</h2>
            <p class="text-lg md:text-xl leading-relaxed" id="about-main-paragraph-content"></p>

            <div class="mt-8">
                <button id="generate-story-btn" class="bg-iran-old-yellow text-iran-old-red px-6 py-3 rounded-lg font-bold text-lg hover:bg-iran-old-red hover:text-white transition duration-300 shadow-md flex items-center justify-center mx-auto">
                    <span class="ml-2" id="generate-story-btn-text">✨ خاطره‌ای از معرفت ✨</span>
                </button>
                <div id="story-loading-indicator" class="mt-4 text-iran-old-red font-semibold hidden">درحال جستجوی خاطره</div>
                <div id="generated-story-output" class="mt-6 p-4 bg-stone-50 rounded-lg border-2 border-old-yellow text-gray-800 text-lg text-right leading-loose hidden">
                    <!-- Generated story will appear here -->
                </div>
            </div>
        </section>

        <!-- Contact Us Section -->
        <section id="contact" class="bg-white rounded-xl shadow-traditional p-8 border-4 border-iran-old-red">
            <h2 class="text-3xl md:text-4xl font-bold text-center text-iran-old-yellow mb-8" id="contact-section-title" data-standard="تماس با ما" data-isfahani="زنگمون بِزِن">تماس با ما</h2>
            <div class="flex flex-col md:flex-row justify-around items-center gap-8">
                <div class="text-center">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2" id="contact-address-title" data-standard="نشانی" data-isfahani="نشونی">نشونی</h3>
                    <p class="text-lg" id="contact-address-text" data-standard="اصفهان، خیابان مارنان" data-isfahani="اصفهون، نصف جهون، خیابون مارنون">اصفهان، خیابان مارنان</p>
                </div>
                <div class="text-center">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2" id="contact-phone-title" data-standard="تلفن" data-isfahani="تیلیفون">تلفن</h3>
                    <p class="text-lg">031-12345678</p>
                </div>
                <div class="text-center">
                    <h3 class="text-2xl font-semibold text-iran-old-red mb-2" id="contact-hours-title" data-standard="ساعات کاری" data-isfahani="ساعِتی کاری">ساعات کاری</h3>
                    <p class="text-lg" id="contact-hours-text" data-standard="از هفت صبح تا دوازده شب" data-isfahani="اِز خوروس خونی ته باغ تا پرسه زِنونی سِگا شاغال">از هفت صبح تا دوازده شب</p>
                </div>
            </div>
            <div class="mt-8 text-center">
                <h3 class="text-2xl font-semibold text-iran-old-red mb-4" data-key="social-title">ما را در شبکه‌های اجتماعی دنبال کنید:</h3>
                <div class="flex justify-center gap-6 text-3xl">
                    <a href="#" class="text-iran-old-red hover:text-iran-old-yellow transition duration-300" aria-label="اینستاگرام">
                        <!-- Image of Instagram icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-instagram"><rect width="20" height="20" x="2" y="2" rx="5" ry="5"/><path d="M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"/><line x1="17.5" x2="17.51" y1="6.5" y2="6.5"/></svg>
                    </a>
                    <a href="#" class="text-iran-old-red hover:text-iran-old-yellow transition duration-300" aria-label="تلگرام">
                        <!-- Image of Telegram icon -->
                        <svg xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-send"><path d="m22 2-7 20-4-9-9-4 20-7Z"/><path d="M15 11l4 4"/></svg>
                    </a>
                </div>
            </div>
        </section>

    </main>

    <!-- Order Modal -->
    <div id="order-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="close-order-modal-btn" class="modal-close-btn">&times;</button>
            <h3 class="text-2xl font-bold text-iran-old-red mb-4 text-center">ثبت سفارش آنلاین</h3>
            <p class="text-gray-700 mb-6 text-center">لطفاً اقلام مورد نظر و اطلاعات تماس خود را وارد کنید.</p>

            <div class="mb-6 max-h-60 overflow-y-auto border border-gray-300 rounded-lg p-2">
                <!-- Menu items for ordering -->
                <div class="order-item">
                    <span class="text-gray-800">ساندویچ کالباس سنتی</span>
                    <input type="number" class="quantity-input" data-item="ساندویچ کالباس سنتی" min="0" value="0">
                </div>
                <div class="order-item">
                    <span class="text-gray-800">همبرگر دست‌ساز معرفت</span>
                    <input type="number" class="quantity-input" data-item="همبرگر دست‌ساز معرفت" min="0" value="0">
                </div>
                <div class="order-item">
                    <span class="text-gray-800">سیب‌زمینی سرخ کرده زعفرانی</span>
                    <input type="number" class="quantity-input" data-item="سیب‌زمینی سرخ کرده زعفرانی" min="0" value="0">
                </div>
                <div class="order-item">
                    <span class="text-gray-800">ساندویچ بندری تند</span>
                    <input type="number" class="quantity-input" data-item="ساندویچ بندری تند" min="0" value="0">
                </div>
                <div class="order-item">
                    <span class="text-gray-800">دوغ محلی و نوشیدنی‌های سنتی</span>
                    <input type="number" class="quantity-input" data-item="دوغ محلی و نوشیدنی‌های سنتی" min="0" value="0">
                </div>
                <div class="order-item">
                    <span class="text-gray-800">سالاد شیرازی اصیل</span>
                    <input type="number" class="quantity-input" data-item="سالاد شیرازی اصیل" min="0" value="0">
                </div>
            </div>

            <div class="mb-4">
                <label for="customer-name" class="block text-gray-700 text-sm font-bold mb-2">نام شما:</label>
                <input type="text" id="customer-name" class="text-input" placeholder="نام و نام خانوادگی">
            </div>
            <div class="mb-6">
                <label for="customer-phone" class="block text-gray-700 text-sm font-bold mb-2">شماره تلفن (مثال: 09123456789):</label>
                <input type="tel" id="customer-phone" class="text-input" placeholder="09xxxxxxxxx" pattern="09[0-9]{9}" required>
            </div>

            <button id="place-order-btn" class="w-full bg-iran-old-red text-white py-3 rounded-lg font-bold text-lg hover:bg-iran-old-yellow hover:text-iran-old-red transition duration-300 shadow-md">ثبت سفارش</button>

            <div id="order-message" class="mt-4 text-center text-sm font-semibold text-green-700 hidden"></div>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donation-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <button id="close-donation-modal-btn" class="modal-close-btn">&times;</button>
            <h3 class="text-2xl font-bold text-iran-old-red mb-4 text-center">کمک مالی به اغذیه معرفت</h3>
            <p class="text-gray-700 mb-6 text-center">برای کمک به آنی که شب را تا صبح بی غذا می گذراند</p>

            <div class="flex flex-wrap justify-center gap-4 mb-6">
                <button class="amount-option" data-amount="35000">35,000 تومان</button>
                <button class="amount-option" data-amount="55000">55,000 تومان</button>
                <button class="amount-option" data-amount="100000">100,000 تومان</button>
                <button class="amount-option" data-amount="180000">180,000 تومان</button>
                <button class="amount-option" data-amount="350000">350,000 تومان</button>
                <button class="amount-option" data-amount="500000">500,000 تومان</button>
                <button class="amount-option" data-amount="1000000">1,000,000 تومان</button>
            </div>

            <div class="mb-6">
                <label for="custom-amount" class="block text-gray-700 text-sm font-bold mb-2">مبلغ دلخواه (تومان):</label>
                <input type="number" id="custom-amount" class="custom-amount-input" placeholder="مثال: 150000" min="1000">
            </div>

            <button id="pay-donation-btn" class="w-full bg-iran-old-red text-white py-3 rounded-lg font-bold text-lg hover:bg-iran-old-yellow hover:text-iran-old-red transition duration-300 shadow-md">پرداخت</button>

            <div id="payment-message" class="mt-4 text-center text-sm font-semibold text-green-700 hidden"></div>
        </div>
    </div>

    <!-- Footer Section -->
    <footer class="bg-iran-old-red text-white py-6 mt-8">
        <div class="container mx-auto px-4 text-center text-sm">
            <p>&copy; 2025 اغذیه معرفت. تمامی حقوق محفوظ است.</p>
            <p class="mt-2">با عشق از اصفهان، ایران</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // DOM Elements
            const dialectToggleBtn = document.getElementById('dialect-toggle-btn');
            const headerTitle = document.getElementById('header-title');
            const headerSlogan = document.getElementById('header-slogan');
            const navAbout = document.getElementById('nav-about');
            const navContact = document.getElementById('nav-contact');
            const heroWelcomeTitle = document.getElementById('hero-welcome-title');
            const aboutMainParagraphContent = document.getElementById('about-main-paragraph-content');
            const menuMenuItem1Desc = document.getElementById('menu-item-1-desc');
            const menuMenuItem2Title = document.getElementById('menu-item-2-title');
            const aboutSectionTitle = document.getElementById('about-section-title');
            const contactAddressTitle = document.getElementById('contact-address-title');
            const contactAddressText = document.getElementById('contact-address-text');
            const contactPhoneTitle = document.getElementById('contact-phone-title');
            const contactHoursTitle = document.getElementById('contact-hours-title');
            const contactHoursText = document.getElementById('contact-hours-text');
            const contactSectionTitle = document.getElementById('contact-section-title');

            // Donation Modal Elements
            const openDonationModalBtn = document.getElementById('open-donation-modal-btn');
            const donationModalOverlay = document.getElementById('donation-modal-overlay');
            const closeDonationModalBtn = document.getElementById('close-donation-modal-btn');
            const amountOptions = document.querySelectorAll('.amount-option');
            const customAmountInput = document.getElementById('custom-amount');
            const payDonationBtn = document.getElementById('pay-donation-btn');
            const paymentMessage = document.getElementById('payment-message');

            // Order Modal Elements
            const openOrderModalBtn = document.getElementById('open-order-modal-btn');
            const orderModalOverlay = document.getElementById('order-modal-overlay');
            const closeOrderModalBtn = document.getElementById('close-order-modal-btn');
            const quantityInputs = document.querySelectorAll('.quantity-input');
            const customerNameInput = document.getElementById('customer-name');
            const customerPhoneInput = document.getElementById('customer-phone');
            const placeOrderBtn = document.getElementById('place-order-btn');
            const orderMessage = document.getElementById('order-message');

            // Gemini API elements
            const generateStoryBtn = document.getElementById('generate-story-btn');
            const generateStoryBtnText = document.getElementById('generate-story-btn-text'); // New element for text
            const storyLoadingIndicator = document.getElementById('story-loading-indicator');
            const generatedStoryOutput = document.getElementById('generated-story-output');


            let selectedAmount = 0; // To store the selected donation amount

            // Function to convert Western digits to Persian digits
            function convertToPersianDigits(num) {
                const persianDigits = ['۰', '۱', '۲', '۳', '۴', '۵', '۶', '۷', '۸', '۹'];
                return num.toString().replace(/\d/g, digit => persianDigits[digit]);
            }

            // Define the translations
            const translations = {
                'header-title': {
                    standard: 'اغذیه معرفت',
                    isfahani: 'اغذیه معرِفِت'
                },
                'header-slogan': {
                    standard: 'طعم نوستالژی و خاطره‌انگیز ایرانی', // Changed "اصیل" to "نوستالژی"
                    isfahani: 'طعمی که یادت میمونِد'
                },
                'nav-about': {
                    standard: 'درباره ما',
                    isfahani: 'آ یُخته راجبمون بدون'
                },
                'nav-contact': {
                    standard: 'تماس با ما',
                    isfahani: 'زنگمون بِزِن'
                },
                'hero-welcome-title-full': { // Full text for h2
                    standard: 'به اغذیه معرفت خوش آمدید!',
                    isfahani: 'به اغذیه معرِفِت خُش اومِدین!'
                },
                'menu-item-1-desc': { // Full text for p
                    standard: 'کالباس ممتاز، خیارشور، گوجه، کاهو و سس مخصوص معرفت.',
                    isfahani: 'کالباس ممتاز، خیارشور، گوجه، کاهو و سس مخصوص معرِفِت.'
                },
                'menu-item-2-title': { // Full text for h3
                    standard: 'همبرگر دست‌ساز معرفت',
                    isfahani: 'همبرگر دست‌ساز معرِفِت'
                },
                'about-section-title-full': { // Full text for h2
                    standard: 'درباره اغذیه معرفت',
                    isfahani: 'آ یُخته راجب اغذیه معرِفِت بدون'
                },
                'about-main-paragraph-content': { // Full paragraph content
                    standard: '"اغذیه معرفت" با الهام از فرهنگ غنی و مهمان‌نوازی ایرانی، تأسیس شد. هدف ما ارائه غذاهایی با کیفیت عالی و طعمی اصیل است که شما را به گذشته‌های شیرین و دورهمی‌های صمیمی ببرد. ما با استفاده از مواد اولیه تازه و مرغوب، و با رعایت سنت‌های آشپزی ایرانی، تجربه‌ای فراموش‌نشدنی برای شما رقم می‌زنیم. فضای ما نیز با دکوراسیونی برگرفته از معماری و هنر ایرانی، حس آرامش و اصالت را تکمیل می‌کند.',
                    isfahani: 'اغذیه معرِفِتا با نیگا به فرهنگی مهمون نوازی ایرونیا بِنا کردیمش تا یُِخته همچین غِذا خب بخورین آ جیگِرِدون حال بیاد. ما تو این یه کوچولی جا با موادی خب و عالی و درجه یــــــــک! با رعایتی تِمومی سنِتای ایرونی دهه پنجا و شصت تجربه فراموش نشدنی برادون بسازیم آ حسی اصالِتا خب تو وجوددون بفرسیم'
                },
                'contact-address-title': {
                    standard: 'نشانی',
                    isfahani: 'نشونی'
                },
                'contact-address-text': {
                    standard: 'اصفهان، خیابان مارنان',
                    isfahani: 'اصفهون، نصف جهون، خیابون مارنون'
                },
                'contact-phone-title': {
                    standard: 'تلفن',
                    isfahani: 'تیلیفون'
                },
                'contact-hours-title': {
                    standard: 'ساعات کاری',
                    isfahani: 'ساعِتی کاری'
                },
                'contact-hours-text': {
                    standard: 'از هفت صبح تا دوازده شب',
                    isfahani: 'اِز خوروس خونی ته باغ تا پرسه زِنونی سِگا شاغال'
                },
                'contact-section-title': {
                    standard: 'تماس با ما',
                    isfahani: 'زنگمون بِزِن'
                },
                // Translations for story generation button and loading indicator
                'generate-story-btn-text': {
                    standard: '✨ خاطره‌ای از معرفت ✨',
                    isfahani: '✨ خاطره‌ای از معرِفِت ✨'
                },
                'story-loading-text': {
                    standard: 'درحال جستجوی خاطره',
                    isfahani: 'دارِد خاطره می جورِد'
                }
            };

            let isIsfahaniMode = localStorage.getItem('isfahaniMode') === 'true';

            // Helper to apply text and then wrap specific phrases with nostalgic font
            function updateTextAndApplyNostalgicFont(element, translationKey, phrasesToWrap) {
                if (!element || !translations[translationKey]) return;

                let currentText = isIsfahaniMode ? translations[translationKey].isfahani : translations[translationKey].standard;
                let finalHtml = currentText;

                phrasesToWrap.forEach(phrase => {
                    const standardPhrase = phrase.standard;
                    const isfahaniPhrase = phrase.isfahani;
                    const targetPhrase = isIsfahaniMode ? isfahaniPhrase : standardPhrase;

                    // Use a regex to replace all occurrences and handle special characters if any
                    // Ensure the phrase is escaped for regex if it contains special characters
                    const escapedPhrase = targetPhrase.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                    const regex = new RegExp(escapedPhrase, 'g');

                    if (finalHtml.includes(targetPhrase)) {
                        finalHtml = finalHtml.replace(regex, `<span class="font-nostalgic-persian">${targetPhrase}</span>`);
                    }
                });
                element.innerHTML = finalHtml;
            }

            // Function to apply all translations and styles
            function applyTranslationsAndStyles() {
                // Update button text
                dialectToggleBtn.textContent = isIsfahaniMode ? 'حالت رسمی' : 'حالت اصفهانی';

                // Apply translations and fonts to elements containing "اغذیه معرفت" or "معرفت"
                headerTitle.textContent = isIsfahaniMode ? translations['header-title'].isfahani : translations['header-title'].standard;
                headerTitle.classList.add('font-nostalgic-persian'); // Always apply nostalgic font to the main title

                updateTextAndApplyNostalgicFont(heroWelcomeTitle, 'hero-welcome-title-full', [{ standard: 'معرفت', isfahani: 'معرِفِت' }]);
                updateTextAndApplyNostalgicFont(menuMenuItem1Desc, 'menu-item-1-desc', [{ standard: 'معرفت', isfahani: 'معرِفِت' }]);
                updateTextAndApplyNostalgicFont(menuMenuItem2Title, 'menu-item-2-title', [{ standard: 'معرفت', isfahani: 'معرِفِت' }]);
                updateTextAndApplyNostalgicFont(aboutSectionTitle, 'about-section-title-full', [{ standard: 'اغذیه معرفت', isfahani: 'اغذیه معرِفِت' }]);
                updateTextAndApplyNostalgicFont(aboutMainParagraphContent, 'about-main-paragraph-content', [{ standard: 'اغذیه معرفت', isfahani: 'اغذیه معرِفِتا' }]);


                // Apply translations for other elements (no special font logic)
                headerSlogan.textContent = isIsfahaniMode ? translations['header-slogan'].isfahani : translations['header-slogan'].standard;
                navAbout.textContent = isIsfahaniMode ? translations['nav-about'].isfahani : translations['nav-about'].standard;
                navContact.textContent = isIsfahaniMode ? translations['nav-contact'].isfahani : translations['nav-contact'].standard;
                contactAddressTitle.textContent = isIsfahaniMode ? translations['contact-address-title'].isfahani : translations['contact-address-title'].standard;
                contactAddressText.textContent = isIsfahaniMode ? translations['contact-address-text'].isfahani : translations['contact-address-text'].standard;
                contactPhoneTitle.textContent = isIsfahaniMode ? translations['contact-phone-title'].isfahani : translations['contact-phone-title'].standard;
                contactHoursTitle.textContent = isIsfahaniMode ? translations['contact-hours-title'].isfahani : translations['contact-hours-title'].standard;
                contactHoursText.textContent = isIsfahaniMode ? translations['contact-hours-text'].isfahani : translations['contact-hours-text'].standard;
                contactSectionTitle.textContent = isIsfahaniMode ? translations['contact-section-title'].isfahani : translations['contact-section-title'].standard;

                // Apply new translations for story generation button and loading indicator
                if (generateStoryBtnText) {
                    generateStoryBtnText.textContent = isIsfahaniMode ? translations['generate-story-btn-text'].isfahani : translations['generate-story-btn-text'].standard;
                }
                if (storyLoadingIndicator) {
                    storyLoadingIndicator.textContent = isIsfahaniMode ? translations['story-loading-text'].isfahani : translations['story-loading-text'].standard;
                }

                // Update donation button numbers with Persian digits
                amountOptions.forEach(button => {
                    const amount = parseInt(button.dataset.amount);
                    button.textContent = `${convertToPersianDigits(amount.toLocaleString('fa-IR'))} تومان`;
                });
            }

            // Initial application of translations and styles based on stored preference
            applyTranslationsAndStyles();

            // Event listener for the toggle button
            dialectToggleBtn.addEventListener('click', () => {
                isIsfahaniMode = !isIsfahaniMode;
                localStorage.setItem('isfahaniMode', isIsfahaniMode); // Save preference
                applyTranslationsAndStyles();
            });

            // --- Donation Modal Functionality ---
            openDonationModalBtn.addEventListener('click', (e) => {
                e.preventDefault(); // Prevent default link behavior
                donationModalOverlay.classList.add('show');
                paymentMessage.classList.add('hidden'); // Hide previous messages
                paymentMessage.textContent = '';
                customAmountInput.value = ''; // Clear custom amount
                amountOptions.forEach(btn => btn.classList.remove('selected')); // Deselect all predefined amounts
                selectedAmount = 0; // Reset selected amount
            });

            closeDonationModalBtn.addEventListener('click', () => {
                donationModalOverlay.classList.remove('show');
            });

            // Close modal when clicking outside the content
            donationModalOverlay.addEventListener('click', (e) => {
                if (e.target === donationModalOverlay) {
                    donationModalOverlay.classList.remove('show');
                }
            });

            // Handle predefined amount selection
            amountOptions.forEach(button => {
                button.addEventListener('click', () => {
                    amountOptions.forEach(btn => btn.classList.remove('selected'));
                    button.classList.add('selected');
                    selectedAmount = parseInt(button.dataset.amount);
                    customAmountInput.value = ''; // Clear custom input if a predefined amount is selected
                });
            });

            // Handle custom amount input
            customAmountInput.addEventListener('input', () => {
                amountOptions.forEach(btn => btn.classList.remove('selected')); // Deselect predefined options
                selectedAmount = parseInt(customAmountInput.value) || 0;
            });

            // Handle Pay button click
            payDonationBtn.addEventListener('click', () => {
                let finalAmount = selectedAmount;
                if (customAmountInput.value && parseInt(customAmountInput.value) > 0) {
                    finalAmount = parseInt(customAmountInput.value);
                }

                if (finalAmount > 0) {
                    paymentMessage.textContent = `پرداخت ${convertToPersianDigits(finalAmount.toLocaleString('fa-IR'))} تومان با موفقیت شبیه‌سازی شد. از کمک شما سپاسگزاریم!`;
                    paymentMessage.classList.remove('hidden');
                    paymentMessage.style.color = '#10B981'; // Green for success
                    // In a real application, you would integrate with a payment gateway here.
                    // For example: fetch('/api/process-payment', { method: 'POST', body: JSON.stringify({ amount: finalAmount }) });
                } else {
                    paymentMessage.textContent = 'لطفاً مبلغی را برای کمک مالی وارد کنید.';
                    paymentMessage.style.color = '#a04040'; // Set color to Old Red for error
                    paymentMessage.classList.remove('hidden');
                }
            });

            // --- Order Modal Functionality ---
            openOrderModalBtn.addEventListener('click', (e) => {
                e.preventDefault();
                orderModalOverlay.classList.add('show');
                orderMessage.classList.add('hidden');
                orderMessage.textContent = '';
                customerNameInput.value = '';
                customerPhoneInput.value = '';
                quantityInputs.forEach(input => input.value = '0'); // Reset quantities
            });

            closeOrderModalBtn.addEventListener('click', () => {
                orderModalOverlay.classList.remove('show');
            });

            orderModalOverlay.addEventListener('click', (e) => {
                if (e.target === orderModalOverlay) {
                    orderModalOverlay.classList.remove('show');
                }
            });

            placeOrderBtn.addEventListener('click', async () => { // Changed to async
                const customerName = customerNameInput.value.trim();
                const customerPhone = customerPhoneInput.value.trim();
                const selectedItems = [];

                quantityInputs.forEach(input => {
                    const quantity = parseInt(input.value);
                    if (quantity > 0) {
                        selectedItems.push(`${input.dataset.item} (${quantity} عدد)`);
                    }
                });

                if (customerName === '' || customerPhone === '' || selectedItems.length === 0) {
                    orderMessage.textContent = 'لطفاً نام، شماره تلفن و حداقل یک مورد را برای سفارش انتخاب کنید.';
                    orderMessage.style.color = '#a04040';
                    orderMessage.classList.remove('hidden');
                    return;
                }

                // Basic phone number validation (Iranian mobile format)
                const phoneRegex = /^09[0-9]{9}$/;
                if (!phoneRegex.test(customerPhone)) {
                    orderMessage.textContent = 'لطفاً یک شماره تلفن معتبر ایرانی (مثال: 09123456789) وارد کنید.';
                    orderMessage.style.color = '#a04040';
                    orderMessage.classList.remove('hidden');
                    return;
                }

                const orderDetails = {
                    customerName: customerName,
                    customerPhone: customerPhone,
                    items: selectedItems
                };

                orderMessage.textContent = 'در حال ارسال سفارش...';
                orderMessage.style.color = '#d4a040'; // Old Yellow for loading
                orderMessage.classList.remove('hidden');

                try {
                    // This is a SIMULATED fetch call.
                    // In a real application, this URL would point to your actual backend server
                    // (e.g., 'https://your-backend-server.com/api/place-order').
                    // The backend would then handle sending the SMS via an SMS Gateway.
                    const response = await new Promise(resolve => setTimeout(() => {
                        // Simulate a successful response
                        resolve({
                            ok: true,
                            json: () => Promise.resolve({ message: `سفارش شما با موفقیت به شماره 09389628012 ارسال شد.` })
                        });
                        // Simulate a failed response:
                        // resolve({
                        //     ok: false,
                        //     json: () => Promise.resolve({ error: 'خطا در ارسال پیامک.' })
                        // });
                    }, 1500)); // Simulate network delay

                    const result = await response.json();

                    if (response.ok) {
                        orderMessage.textContent = `سفارش شما با موفقیت ثبت شد! ${result.message || ''}`;
                        orderMessage.style.color = '#10B981'; // Green for success
                    } else {
                        orderMessage.textContent = `خطا در ثبت سفارش: ${result.error || 'مشکلی پیش آمد.'}`;
                        orderMessage.style.color = '#a04040'; // Old Red for error
                    }
                } catch (error) {
                    console.error('Error placing order:', error);
                    orderMessage.textContent = 'خطا در ارتباط با سرور (شبیه‌سازی). لطفاً دوباره تلاش کنید.';
                    orderMessage.style.color = '#a04040';
                }
            });


            // --- Gemini API Integration for Story Generation ---
            generateStoryBtn.addEventListener('click', async () => {
                storyLoadingIndicator.classList.remove('hidden');
                generatedStoryOutput.classList.add('hidden'); // Hide previous story
                generatedStoryOutput.textContent = ''; // Clear previous story

                const prompt = "یک خاطره کوتاه و کاملاً طبیعی و انسانی بنویس، طوری که انگار یک شخص واقعی آن را تعریف می‌کند. این خاطره باید درباره یک یا دو بار مراجعه به اغذیه فروشی 'اغذیه معرفت' در یکی از دهه‌های ۵۰، ۶۰، ۷۰، ۸۰ یا ۹۰ شمسی (مثلاً سال ۱۳۷۱ یا ۱۳۸۵) باشد. در داستان به طعم بی‌نظیر ساندویچ‌های معرفت و فضای همیشه شلوغ و پر جنب و جوش مغازه اشاره کن. حتماً ذکر کن که 'اغذیه معرفت' نیمکت برای نشستن ندارد و مشتریان ساندویچ‌هایشان را سرپا می‌خورند یا با خود می‌برند. از جملات کوتاه و محاوره‌ای استفاده کن و از ذکر همه‌ی دهه‌ها در یک خاطره خودداری کن. طول داستان حدود ۱۵۰ کلمه باشد.";

                const apiKey = ""; // If you want to use models other than gemini-2.0-flash or imagen-3.0-generate-002, provide an API key here. Otherwise, leave this as-is.
                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

                try {
                    const payload = {
                        contents: [{
                            role: "user",
                            parts: [{ text: prompt }]
                        }]
                    };
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0 &&
                        result.candidates[0].content && result.candidates[0].content.parts &&
                        result.candidates[0].content.parts.length > 0) {
                        const storyText = result.candidates[0].content.parts[0].text;
                        generatedStoryOutput.innerHTML = storyText; // Use innerHTML to allow for potential formatting from LLM
                        generatedStoryOutput.classList.remove('hidden');
                    } else {
                        generatedStoryOutput.textContent = 'متاسفانه نتوانستیم خاطره‌ای تولید کنیم. لطفاً دوباره تلاش کنید.';
                        generatedStoryOutput.style.color = '#a04040';
                        generatedStoryOutput.classList.remove('hidden');
                    }
                } catch (error) {
                    console.error('Error generating story:', error);
                    generatedStoryOutput.textContent = 'خطا در ارتباط با سرور. لطفاً اتصال اینترنت خود را بررسی کنید.';
                    generatedStoryOutput.style.color = '#a04040';
                    generatedStoryOutput.classList.remove('hidden');
                } finally {
                    storyLoadingIndicator.classList.add('hidden');
                }
            });
        });
    </script>

</body>
</html>
